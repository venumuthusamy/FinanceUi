<div class="page-container">

    <!-- HEADER -->
  <header class="header">
        <i style="cursor: pointer;" class="fa fa-bars toggle-btn" (click)="toggleSidebar()"  [ngClass]="{'togglePosition':isToggle}"></i>
        <h6  style="cursor: pointer;"  (click)="showOverlay($event)">{{username}}</h6> 
      
    <p-overlayPanel #overlayPanel [showCloseIcon]="true">
      <div class="popup-options">
        <button
          pButton
          type="button"
          label="Change Password"
          class="p-button-text"
          (click)="onChangePassword(); overlayPanel.hide()"
        ></button>
        <button
          pButton
          type="button"
          label="Logout"
          class="p-button-text p-button-danger"
          (click)="onLogout(); overlayPanel.hide()"
        ></button>
      </div>
    </p-overlayPanel>

  </header>
 <!-- Sidebar + Content  -->
  <div class="wrapper">
    <nav class="sidebar"   [ngClass]="{
         'collapsed': isCollapsed && !isMobile,
         'mobile-open': isMobile && isOpenMobile,
         'mobile-closed': isMobile && !isOpenMobile
       }">
      <div class="searchtop" *ngIf="!isToggle || isToggle && isMobile">
        <i class="fa fa-search search-icon"></i>
        <input type="text" [(ngModel)]="searchMenuName" (input)="filterMenus()" placeholder="Search...">
        <i *ngIf="searchMenuName" class="fa fa-times"
          (click)="clearField('searchMenuName')"
          style="position: absolute; left: 200px; top: 50%; transform: translateY(-50%);
                  cursor: pointer; color: #888; font-size: 14px;"></i>
      </div>

      <!-- This container will scroll -->
      <div class="menu-scroll">
        <ul>
          <li *ngFor="let item of menuItems">
            <!-- No children -->
            <ng-container *ngIf="!item.children">
              <a [routerLink]="item.route"
                routerLinkActive="active"
                (click)="onParentMenuClick(item)"
                [class.selected]="selectedParent === item.name">
                <i [class]="item.icon"   (mouseover)="onIconHover($event)" 
                  ></i>
                {{ item.name }}
                <span class="arrow">
                  <i [class]="selectedParent === item.name ? 'fas fa-angle-down' : 'fas fa-angle-left'"></i>
                </span>
              </a>
            </ng-container>

            <!-- With children -->
            <ng-container *ngIf="item.children">
              <div class="menu-title"
                  (click)="onParentMenuClick(item)"
                  [class.selected]="selectedParent === item.name">
                  <i [class]="item.icon" (mouseover)="onIconHover($event)"></i>
                {{ item.name }}
                <span class="arrow">
                  <i [class]="activeSubMenu === item.name ? 'fas fa-angle-down' : 'fas fa-angle-left'"></i>
                </span>
              </div>

              <ul *ngIf="searchMenuName ? activeSubMenus.includes(item.name) : activeSubMenu === item.name"
                  class="submenu">
                <li *ngFor="let child of item.children">
                  <a [routerLink]="child.route"
                    routerLinkActive="active"
                    (click)="onSubMenuItemClick()">
                    <i [class]="child.icon"></i>
                    {{ child.name }}
                  </a>
                </li>
              </ul>
            </ng-container>
          </li>
        </ul>
      </div>
    </nav>


    <div class="content" [ngClass]="{
         'mobileContent': isToggle && isMobile}">
      <app-toaster></app-toaster>
      <router-outlet></router-outlet>
    </div>
  </div>

    <!-- FOOTER -->
  <footer class="footer" [ngClass]="{
         'mobileFooter': isToggle && isMobile}">
    <p>Copyright Â© FBH {{today}}. All rights reserved.</p>
  </footer>
</div>





